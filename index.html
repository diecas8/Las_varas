<!DOCTYPE html>
<html>
<head>
    <title>Geoportal Interactivo - Tumaco</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        html, body, #map {
            height: 100%;
            margin: 0;
        }
        .leaflet-control-attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            padding: 0 5px;
            font-size: 11px;
            background: rgba(255,255,255,0.7);
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        var map = L.map('map').setView([1.795, -78.825], 10); // Centrado en Tumaco con zoom 10

        // Capas base
        var googleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
            maxZoom: 20,
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
            attribution: 'Map data &copy; <a href="https://www.google.com/maps/">Google Maps</a>'
        }).addTo(map);

        var esriSatellite = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        });

        // Capas GeoJSON
        var caboManglar = L.geoJSON(null, { style: { color: 'red' } });
        var consejoLasVaras = L.geoJSON(null, { style: { color: 'blue' } });
        var corMangle = L.geoJSON(null, { style: { color: 'green' } });
        var mangleConsejo = L.geoJSON(null, { style: { color: 'purple' } });
        var tumaco = L.geoJSON(null, { style: { color: 'orange' } }).addTo(map); // Tumaco se agrega al mapa inicialmente
        var constricciones = L.geoJSON(null, { style: { color: 'brown' } });

        // Cargar datos GeoJSON (reemplaza con tus rutas reales)
        fetch('Cabo_manglar.geojson')
            .then(response => response.json())
            .then(data => caboManglar.addData(data));

        fetch('Consejo_las_varas.geojson')
            .then(response => response.json())
            .then(data => consejoLasVaras.addData(data));

        fetch('Cor_mangle.geojson')
            .then(response => response.json())
            .then(data => corMangle.addData(data));

        fetch('Mangle_consejo.geojson')
            .then(response => response.json())
            .then(data => mangleConsejo.addData(data));

        fetch('Tumaco.geojson')
            .then(response => response.json())
            .then(data => tumaco.addData(data));

        fetch('constricciones.geojson')
            .then(response => response.json())
            .then(data => constricciones.addData(data));

        // Control de capas
        var baseMaps = {
            "Google Streets": googleStreets,
            "Esri Satellite": esriSatellite
        };

        var overlayMaps = {
            "Cabo Manglar": caboManglar,
            "Consejo Las Varas": consejoLasVaras,
            "Cor Mangle": corMangle,
            "Mangle Consejo": mangleConsejo,
            "Tumaco": tumaco,
            "Constricciones": constricciones
        };

        L.control.layers(baseMaps, overlayMaps).addTo(map);

        // Créditos
        L.control.attribution({
            prefix: 'Elaborado por Diego Castaño'
        }).addTo(map);
    </script>
</body>
</html>
